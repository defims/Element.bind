<!doctype html>
<head>
    <script src="../../DefineProperty.polyfill/defineProperty.polyfill.js"></script>
    <script src="../../Array.observe/Array.observe.js"></script>
    <script src="../Element.bind.js"></script>
</head>
<body>
    <div id='textContent'></div>
    <div id='textContent2'></div>
    <div id='textContent3'></div>
    <div id='attributesId'></div>
    <div id='attributesClass'></div>
    <div id='attributesClass2'></div>
    <div id='attributesStyle'></div>
    <div id='attributesStyleTop' style="position:relative; width:1em; height:1em; background-color:green;"></div>
    <div id='attributesCustom'></div>
    <div id='dataset'></div>
    <div id='scope'>
        <div id='scopeItem'></div>
    </div>
    <div class='array'>
        <div class='arrayItem'></div>
        <div class='arrayItem2'>*</div>
    </div>
    <div id='elementObject'>
        <div id="nestScope">
            <div id="objectChild"></div>
            <div id="objectChild2"></div>
            <div id="objectChild3"></div>
        </div>
    </div>
    <div class='elementArray'>
        <div class="arrayChild">elementArray</div>
    </div>
<div id='elementBoolean'></div>
<div id='elementNumber'></div>
<script>
/*
Bind(Element, 'attribute', object, 'property');
Bind.bind = function(element, attribute, object, property){
    if(name == 'myBinding'){
    }else Bind.prototype.bind.call(this, element, attribute, object, property);
}
*/
var data ={
    textContent : {
        path    : [{
            to  : [{
                value : 'content'
            }]
        }]
    },
    attributes  : {
        id      : 'initId',
        class   : ['class1', 'class2'],
        class2  : ['class1', 'class2'],
        style   : {
            display         : 'block',
            position        : 'relative',
            width           : '1em',
            height          : '1em',
            backgroundColor : 'red'
        },
        styleTop    : {
            top : '1em'
        },
        custom  : 'value'
    },
    dataset     : {
        foo     : 'bar'
    },
    event       : {
        click   : function(){
            console.log('click')
        }
    },
    scope       : {
        path    : {
            to  : {
                data : 'value'
            }
        }
    },
    arr     : [1,2,3,4],
    bool    : true,
    num     : 90,
    func    : function(){
        //observe(target, callback);
    }
};
var $   = function(selector){
    return document.querySelectorAll(selector);
}
////basic usage for exit attribute
////bind textContent
//ElementBind($('#textContent'), 'textContent', data.textContent, 'path[0].to[0].value');
//ElementBind($('#textContent2'), 'textContent', data.textContent.path[0], 'to[0].value');//the same as above
//ElementBind($('#textContent3'), 'textContent', data.textContent.path[0].to[0], 'value');//the same as above
////var bindId  = ElementBind($('#textContent3'), 'textContent', data.textContent.path[0].to[0], 'value');//the same as above
////ElementBind.unbind(bindId)
////ElementBind($('#visibility'), 'visibility', data, 'visibility');//bind visibility to boolean
//ElementBind($('#attributesId'), 'attributes.id', data.attributes, 'id');//bind attribute to value
//ElementBind($('#attributesClass'), 'attributes.class', data.attributes, 'class');//bind attribute to Array will render to "display: block;"
//ElementBind($('#attributesClass2'), 'attributes.class', data.attributes, 'class2');//bind attribute to Array will render to "display: block;"
//ElementBind($('#attributesStyle'), 'attributes.style', data.attributes, 'style');//bind attribute to Object will render to "display: block;"
//ElementBind($('#attributesStyleTop'), 'attributes.style.top', data.attributes.styleTop, 'top');//bind attribute top
//ElementBind($('#attributesCustom'), 'attributes.custom.define', data.attributes, 'custom');//bind attribute top
//ElementBind($('#dataset'), 'dataset.data.set.content', data.dataset, 'foo');//bind dataset
//
////added attribute event
////ElementBind($('#event'), 'event.click', data.event, 'click');//bind event
////ElementBind($('#event'), 'event.webkitTransitionEnd', data.event, 'webkitTransitionEnd');//bind event with prefix ignore when event is undefined
////ElementBind($('#event'), 'event.mozTransitionEnd', data.event, 'mozTransitionEnd');//bind event with prefix ignore when event is undefined
////ElementBind($('#event'), 'event.oTransitionEnd', data.event, 'oTransitionEnd');//bind event with prefix ignore when event is undefined
////ElementBind($('#event'), 'event.transitionEnd', data.event, 'transitionEnd');//bind event with prefix ignore when event is undefined
//
////added attribute scope
//ElementBind($('#scope'), 'scope', data, 'scope');//bind scope
//ElementBind($('#scopeItem'), 'textContent', 'path.to.data');//relative bind without object paramater, scope bind must be first binded
//
////added attribute repeat
ElementBind($('.array'), 'repeat', data, 'arr');//bind repeat, and each repeat element will has a scope of arr[i], and $index is useful
//ElementBind($('.arrayItem'), 'textContent', '$index');//bind repeat, and each repeat element will has a scope of arr[i], and $index is useful
ElementBind($('.arrayItem2'), 'textContent', '[$index]');//the same as above
//
////added attribute handle
//ElementBind($('#function'), 'handle', data, 'func');//custom bind handle function for select node
//
////custom binding
//ElementBind.config.bind = function(element, attribute, object, property){//custom bind for follow use
//    if(attribute == 'myAttribute'){
//        //handle
//    }else ElementBind.config.prototype.bind.apply(this, arguments);
//}
////initial value will first render to data
//for example span style will first render to data

//modify data
setTimeout(function(){
    //data.textContent.path[0].to[0].value    = 'modify textContent';
    //data.attributes.id              = 'changeId';
    //data.attributes.class.push('class3');//failed
    //data.attributes.class2          = ['c1','c2'];//replace the whole className
    //data.attributes.style           = {backgroundColor: 'blue'};//only replace inside items
    //data.attributes.styleTop.top    = '2em';
    //data.scope.path.to.data         = 'change data';
    //console.log('settimeout')
    data.arr[1]                     = 99;
    data.arr                        = [2,3,5,6,7];
    data.arr[2]                     = 990;
},1000);
</script>
</body>
</html>
